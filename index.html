<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Neighbourhood Map</title>
    <link href="http://fonts.googleapis.com/css?family=Exo" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="bower_components/knockout/dist/knockout.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
    <script>
      var map;
      var geocoder = new google.maps.Geocoder();

      function initialize() {
        var haightAshbury = new google.maps.LatLng(37.7699298, -122.4469157);
        var mapOptions = {
          zoom: 8,
          center: haightAshbury,
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };
        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

          // Add address to search history when the map is clicked.
          google.maps.event.addListener(map, "click", function(event) {
            clickedAddress = event.latLng.k + ", " + event.latLng.D;
            viewModel.address(clickedAddress);
            viewModel.loadData();
          });

          // Adds a marker at the center of the map.
          //addMarker(haightAshbury);
        }


      google.maps.event.addDomListener(window, "load", initialize);

      // Code from udacity"s FEND Project 2, interactive Resume
      // Vanilla JS way to listen for resizing of the window
      // and adjust map bounds
      window.addEventListener("resize", function(e) {
      // Make sure the map bounds get updated on page resize
      map.fitBounds(mapBounds);
      });

    </script>
  </head>
  <body>
   <header>
        <h1 class="greeting" data-bind="text: greeting"></h1>

        <form class="form-container">
            <label for="street">Adress (Street, City, Coordinates, etc.) </label>
            <input type="text" data-bind="value: address">
            <button data-bind="click: loadData">Submit</button>
        </form>
        <div id="panel">
          <input onclick="clearMarkers();" type="button" value="Hide Markers">
          <input onclick="showMarkers();" type="button" value="Show All Markers">
          <input onclick="deleteMarkers();" type="button" value="Delete Markers">
        </div>
    </header>

    <div id="map-canvas" class="map"></div>

    <div class="saved-locations">
        <label>Search Entries</label><input type="text">
        <ul class="address-list" data-bind="foreach: addressList">
            <li class="address-list-item">
                <a data-bind="click: update, attr: {href: address}" ><span data-bind="text: address"></span></a>
                <button class="delete-entry" data-bind="click: remove">X</button>
            </li>
        </ul>
    </div>

    <div class="search-history">
        <div class="row">
            <h4>Search history</h4>
            <button class="clear-history" data-bind="click: clearHistory">Clear</button>
        </div>
        <ul class="address-list" data-bind="foreach: searchHistory">
            <li class="address-list-item">
                <a data-bind="click: update"><span data-bind="text: address"></span></a>
                <button class="save-entry" data-bind="click: save">Save</button>
            </li>
        </ul>

        <p class="warning" data-bind="visible: showWarning">Entry already added!</p>
    </div>

    <script src="script/main.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
  </body>
</html>
